---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
---

<Layout>
  <header class="bg-blue-600 py-4 shadow-md rounded-b-2xl">
    <h2
      class="text-3xl kaus font-semibold text-white text-center tracking-wide"
    >
      Chats An√≥nimos
    </h2>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8">
    <section
      id="salas"
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
    >
      <Card
        icon="üíª"
        title="Tecnolog√≠a"
        description="Comparte ideas sobre avances tecnol√≥gicos, gadgets y programaci√≥n."
        buttonText="Ingresar a la sala"
      />
      <Card
        icon="üéµ"
        title="M√∫sica"
        description="Habla sobre tus g√©neros favoritos, artistas y descubre nueva m√∫sica."
        buttonText="Ingresar a la sala"
      />
      <Card
        icon="üé¨"
        title="Pel√≠culas"
        description="Recomienda pel√≠culas, comenta estrenos o cl√°sicos que te encantan."
        buttonText="Ingresar a la sala"
      />
      <Card
        icon="‚òï"
        title="Caf√© Chat"
        description="Un espacio relajado para charlar de cualquier tema, como en una cafeter√≠a."
        buttonText="Ingresar a la sala"
      />
      <Card
        icon="üéÆ"
        title="Videojuegos"
        description="Comparte tus juegos favoritos, tips, y experiencias gamer."
        buttonText="Ingresar a la sala"
      />
      <Card
        icon="üìñ"
        title="Libros"
        description="Habla sobre lecturas interesantes, autores y libros que te inspiraron."
        buttonText="Ingresar a la sala"
      />
    </section>
  </main>
</Layout>
<script is:inline>
  const modal = document.getElementById("modal");
  const modalContent = document.getElementById("modal-content");
  const confirmBtn = document.getElementById("confirmar");
  let salaSeleccionada = null;

  const botones = document.getElementsByClassName("btn-modal");
  modal.addEventListener("click", (event) => {
    if (event.target === event.currentTarget) {
      modal.classList.add("hidden");
    }
  });

  for (let btn of botones) {
    btn.addEventListener("click", (e) => {
      const title = btn.dataset.title;
      salaSeleccionada = title.trim();
      modalContent.innerHTML = `Sala seleccionada: <span class="font-semibold">${salaSeleccionada}</span>`;
      modal.classList.remove("hidden");
      confirmBtn.focus();
    });
  }

  const cerrarBotones = document.getElementsByClassName("btn-close");

  for (let btn of cerrarBotones) {
    btn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
  }

  confirmBtn.addEventListener("click", () => {
    console.log("Ingresando a sala:", salaSeleccionada);
    modal.classList.add("hidden");
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) {
      modal.classList.add("hidden");
    }
  });
</script>
